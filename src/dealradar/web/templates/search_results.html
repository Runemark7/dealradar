{% from "components/search_summary.html" import render_search_summary %}
{% from "components/deal_card.html" import render_deal_card %}

{% if deals %}
    {{ render_search_summary(query, max_price, keywords, deals|length) }}
    {% for deal in deals %}
        {{ render_deal_card(deal) }}
    {% endfor %}
{% else %}
    <div class="no-deals">
        {% if not query %}
        <h2>No search query</h2>
        <p>Please enter a search query above</p>
        {% else %}
        <h2>No deals found</h2>
        <p><strong>Search:</strong> {{ query }}</p>
        {% if max_price %}
        <p><strong>Budget:</strong> Up to {{ max_price }} kr</p>
        {% endif %}
        {% if keywords %}
        <p><strong>Keywords:</strong> {{ keywords|join(', ') }}</p>
        {% endif %}
        <p>Try adjusting your search or removing some filters</p>
        {% endif %}
    </div>
{% endif %}
